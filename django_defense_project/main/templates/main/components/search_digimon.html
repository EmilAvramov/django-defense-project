{% extends "../pages/search.html" %}

{% block child %}
    <form action="{% url 'api_app:search/digimon' %}" method="GET">
        {{ form }}
        <input type="submit" value="Submit">
    </form>

    {{data}}

    {% if data.content %}
        {% for digimon in data.content%}
            <div class="search__result_card" data-pos={{digimon.id}}>
                <a href={% url 'api_app:search/digimon_by_id' digimon.id %}>
                    <div>{{digimon.name}}</div>
                </a>
                <img src={{digimon.image}}/>
            </div>
        {% endfor %}
    {% else %}
            <div class="search__result_details" data-id={{data.id}}>
                <p class="search__details_name">
                    {{data.name}}
                </p>
                <p class="search__details_antibody">
                    {% if data.xAntibody == True %}
                        Yes
                    {% else %}
                        No
                    {% endif %}
                </p>
                <div class="search__details_image">
                    <img src={{data.images.0.href}}/>
                </div>
                <div class="search__details_levels">
                    {% for item in data.levels %}
                        <p class="search__details_level">
                            <a href={% url 'api_app:search/level_by_id' item.id %}>
                                {{item.level}}
                            </a>
                        </p>
                    {% endfor %}
                </div>
                <p class="search__details_type">
                    {% for item in data.types %}
                        <p>
                            <a href={% url 'api_app:search/type_by_id' item.id %}>
                                {{item.type}}
                            </a>
                        </p>
                    {% endfor %}
                </p>
                <div class="search__details_attributes">
                    {% for item in data.attributes %}
                        <p>
                            <a href={% url 'api_app:search/attribute_by_id' item.id %}>
                                {{item.attribute}}
                            </a>
                        </p>
                    {% endfor %}
                </div>
                <div class="search__details_fields">
                    {% for item in data.fields %}
                        <p>
                            <a href={% url 'api_app:search/field_by_id' item.id %}>
                                {{item.field}}
                            </a>
                        </p>
                    {% endfor %}
                </div>
                {% if data.releaseDate %}
                    <p>Release Date: {{data.releaseDate}}</p>
                {% endif %}
                {% for item in data.descriptions %}
                    {% if item.language == 'en_us' %}
                        {% if item.origin %}
                            <p>Origin: {{item.origin}}</p>
                        {% endif %}
                        {% if item.description %}
                            <p>Description: {{item.description}}</p>
                        {% endif %}
                    {% endif %}
                {% endfor %}

                <div class="search__details_skills">
                    {% for item in data.skills %}
                        <p>
                            <a href={% url 'api_app:search/skill_by_id' item.id %}>
                                Skill Name: {{item.skill}}
                            </a>
                            {% if item.description %}
                                <p>
                                    Description: {{item.description}}
                                </p>
                            {% endif %}
                        </p>
                    {% endfor %}
                </div>
            </div>
    {% endif %}


{% endblock %}